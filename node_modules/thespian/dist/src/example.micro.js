"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Thespian_1 = require("./Thespian");
const mismatched_1 = require("mismatched");
describe("Thespian By Example", () => {
    it("We can call a mocked method several times", () => {
        const thespian = new Thespian_1.Thespian();
        const mock = thespian.mock("aTell");
        mock
            .setup(f => f.tellAll("elisa", 2))
            .returns(() => 44)
            .times(2);
        const mocked = mock.object;
        mismatched_1.assertThat(mocked.tellAll("elisa", 2)).is(44);
        mismatched_1.assertThat(mocked.tellAll("elisa", 2)).is(44);
        thespian.verify();
    });
    it("Sophisticated matching of mock arguments", () => {
        const thespian = new Thespian_1.Thespian();
        const mockCheck = thespian.mock("check");
        mockCheck
            .setup(f => f.match({
            matchId: 0,
            matches: [{
                    match_type: mismatched_1.match.string.startsWith("full"),
                    links: mismatched_1.match.array.length(1)
                }]
        }))
            .returns(() => Math.random());
        const check = mockCheck.object;
        mismatched_1.assertThat(check.match({
            matchId: 0,
            matches: [{
                    match_type: "full-match",
                    links: ["REL"]
                }]
        })).is(mismatched_1.match.ofType.number());
        thespian.verify();
    });
    it("mocking a function", () => {
        let thespian = new Thespian_1.Thespian();
        let mockFn = thespian.mock("fn");
        mockFn
            .setup(g => g(2))
            .returns(() => 33);
        thespian.describeMocks();
        mismatched_1.assertThat(mockFn.object(2)).is(33);
        thespian.describeMocks();
        thespian.verify();
    });
});
//# sourceMappingURL=example.micro.js.map