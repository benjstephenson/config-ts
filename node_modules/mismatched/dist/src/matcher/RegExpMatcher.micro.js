"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertThat_1 = require("../assertThat");
const match_1 = require("../match");
const MatchResult_1 = require("../MatchResult");
const DiffMatcher_1 = require("./DiffMatcher");
const validateThat_1 = require("../validateThat");
describe("RegExpMatcher:", () => {
    describe("assertThat():", () => {
        it("Matches", () => {
            assertThat_1.assertThat("ab").is(match_1.match.regEx.match(/a./));
            assertThat_1.assertThat("ab").is(/a./);
            assertThat_1.assertThat("ab").is(match_1.match.regEx.match(/ab/));
            assertThat_1.assertThat("AB").is(match_1.match.regEx.match(/ab/ig));
            assertThat_1.assertThat("AB").is(match_1.match.regEx.match(/ab/i));
            assertThat_1.assertThat(/[ap]\.?m?\.?/i).is(/[ap]\.?m?\.?/i);
        });
        it("Mismatches", () => {
            assertThat_1.assertThat("ab").failsWith(match_1.match.regEx.match(/c/), { [MatchResult_1.MatchResult.was]: "ab", [MatchResult_1.MatchResult.expected]: "/c/" });
        });
        it("Mismatches: errors", () => {
            const mismatched = [];
            const matcher = match_1.match.regEx.match(/c/);
            matcher.mismatches(new DiffMatcher_1.ContextOfValidationError(), mismatched, "ab");
            assertThat_1.assertThat(mismatched).is([
                { actual: "ab", expected: "/c/" }
            ]);
        });
    });
    describe("validateThat():", () => {
        const expected = match_1.match.regEx.match(/a./);
        it("succeeds", () => {
            const validation = validateThat_1.validateThat("ab").satisfies(expected);
            assertThat_1.assertThat(validation.passed()).is(true);
        });
        it("fails", () => {
            const validation = validateThat_1.validateThat("Ab").satisfies(expected);
            assertThat_1.assertThat(validation.passed()).is(false);
            assertThat_1.assertThat(validation.errors).is([
                `{actual: "Ab", expected: "/a./"}`
            ]);
        });
    });
});
//# sourceMappingURL=RegExpMatcher.micro.js.map